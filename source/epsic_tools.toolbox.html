<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>epsic_tools.toolbox package &mdash; epsic_tools 0.0.1 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> epsic_tools
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">epsic_tools.toolbox package</a><ul>
<li><a class="reference internal" href="#submodules">Submodules</a></li>
<li><a class="reference internal" href="#module-epsic_tools.toolbox.define_probe_function">epsic_tools.toolbox.define_probe_function module</a></li>
<li><a class="reference internal" href="#module-epsic_tools.toolbox.make_merlin_mask">epsic_tools.toolbox.make_merlin_mask module</a></li>
<li><a class="reference internal" href="#module-epsic_tools.toolbox.make_merlin_mask_test">epsic_tools.toolbox.make_merlin_mask_test module</a></li>
<li><a class="reference internal" href="#module-epsic_tools.toolbox.ptycho_utils">epsic_tools.toolbox.ptycho_utils module</a></li>
<li><a class="reference internal" href="#module-epsic_tools.toolbox.radial_profile">epsic_tools.toolbox.radial_profile module</a></li>
<li><a class="reference internal" href="#module-epsic_tools.toolbox.sim_utils">epsic_tools.toolbox.sim_utils module</a></li>
<li><a class="reference internal" href="#module-epsic_tools.toolbox.warp_3d">epsic_tools.toolbox.warp_3d module</a></li>
<li><a class="reference internal" href="#module-epsic_tools.toolbox">Module contents</a></li>
</ul>
</li>
</ul>
</div>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">epsic_tools</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>epsic_tools.toolbox package</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/source/epsic_tools.toolbox.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="epsic-tools-toolbox-package">
<h1>epsic_tools.toolbox package<a class="headerlink" href="#epsic-tools-toolbox-package" title="Permalink to this headline"></a></h1>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline"></a></h2>
</section>
<section id="module-epsic_tools.toolbox.define_probe_function">
<span id="epsic-tools-toolbox-define-probe-function-module"></span><h2>epsic_tools.toolbox.define_probe_function module<a class="headerlink" href="#module-epsic_tools.toolbox.define_probe_function" title="Permalink to this headline"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.define_probe_function.FuncAberrUV">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.define_probe_function.</span></span><span class="sig-name descname"><span class="pre">FuncAberrUV</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">u</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">v</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">aberrcoeff</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/define_probe_function.html#FuncAberrUV"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.define_probe_function.FuncAberrUV" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.define_probe_function.define_probe_function">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.define_probe_function.</span></span><span class="sig-name descname"><span class="pre">define_probe_function</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">V</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alpha</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">px_cal</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">array_px</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">aberr_input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_me</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/define_probe_function.html#define_probe_function"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.define_probe_function.define_probe_function" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.define_probe_function.rad_array">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.define_probe_function.</span></span><span class="sig-name descname"><span class="pre">rad_array</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">arr_len</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/define_probe_function.html#rad_array"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.define_probe_function.rad_array" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</section>
<section id="module-epsic_tools.toolbox.make_merlin_mask">
<span id="epsic-tools-toolbox-make-merlin-mask-module"></span><h2>epsic_tools.toolbox.make_merlin_mask module<a class="headerlink" href="#module-epsic_tools.toolbox.make_merlin_mask" title="Permalink to this headline"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.make_merlin_mask.add_to_mask">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.make_merlin_mask.</span></span><span class="sig-name descname"><span class="pre">add_to_mask</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mask</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pix_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/make_merlin_mask.html#add_to_mask"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.make_merlin_mask.add_to_mask" title="Permalink to this definition"></a></dt>
<dd><p>Adds an arbitrary list of pixels to a mask.
Parameters
__________
mask: pyxem ElectronDiffraction2D</p>
<blockquote>
<div><p>mask as pyxem object</p>
</div></blockquote>
<dl class="simple">
<dt>pix_list: list of tuples of ints</dt><dd><p>list of pixels expressed as tuples to be added to a mask</p>
</dd>
<dt>save_path: str</dt><dd><p>default None. If desired to save this new version, full path of
h5 file to be provided here.</p>
</dd>
</dl>
<p>mask_new: pyxem ElectronDiffraction2D</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.make_merlin_mask.make_mask">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.make_merlin_mask.</span></span><span class="sig-name descname"><span class="pre">make_mask</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">flat_field</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hot_pix_factor</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask_cross</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dest_h5_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_hist</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/make_merlin_mask.html#make_mask"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.make_merlin_mask.make_mask" title="Permalink to this definition"></a></dt>
<dd><p>Creates mask for Merlin Medipix 
Parameters:
_____________
flat_field: str</p>
<blockquote>
<div><p>full path of the flat-field mib data</p>
</div></blockquote>
<dl class="simple">
<dt>hot_pix_factor: float</dt><dd><p>intensity factor above average intensity to determine hot pixels</p>
</dd>
<dt>mask_cross: bool</dt><dd><p>Default False. Mask out the central cross on quad chip</p>
</dd>
<dt>show_mask: bool</dt><dd><p>Default True. For plotting the mask.</p>
</dd>
<dt>dest_h5_path: str</dt><dd><p>default None. full path of the h5 file to be saved. 
key for mask: ‘merlin_mask’. A pyxem version of the mask is also 
saved in the same destination.</p>
</dd>
<dt>show_hist: bool</dt><dd><p>If passed as True a histogram of the flat-feild data is shown 
(averaged if the data is a stack)</p>
</dd>
</dl>
<dl class="simple">
<dt>mask: pyxem ElectronDiffraction2D</dt><dd><p>mask pyxem object</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-epsic_tools.toolbox.make_merlin_mask_test">
<span id="epsic-tools-toolbox-make-merlin-mask-test-module"></span><h2>epsic_tools.toolbox.make_merlin_mask_test module<a class="headerlink" href="#module-epsic_tools.toolbox.make_merlin_mask_test" title="Permalink to this headline"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.make_merlin_mask_test.add_to_mask">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.make_merlin_mask_test.</span></span><span class="sig-name descname"><span class="pre">add_to_mask</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mask</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pix_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/make_merlin_mask_test.html#add_to_mask"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.make_merlin_mask_test.add_to_mask" title="Permalink to this definition"></a></dt>
<dd><p>Adds an arbitrary list of pixels to a mask.
Parameters
__________
mask: pyxem ElectronDiffraction2D</p>
<blockquote>
<div><p>mask as pyxem object</p>
</div></blockquote>
<dl class="simple">
<dt>pix_list: list of tuples of ints</dt><dd><p>list of pixels expressed as tuples to be added to a mask</p>
</dd>
<dt>save_path: str</dt><dd><p>default None. If desired to save this new version, full path of
h5 file to be provided here.</p>
</dd>
</dl>
<p>mask_new: pyxem ElectronDiffraction2D</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.make_merlin_mask_test.make_mask">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.make_merlin_mask_test.</span></span><span class="sig-name descname"><span class="pre">make_mask</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">flat_field</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hot_pix_factor</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dest_h5_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_hist</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/make_merlin_mask_test.html#make_mask"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.make_merlin_mask_test.make_mask" title="Permalink to this definition"></a></dt>
<dd><p>Creates mask for Merlin Medipix 
Parameters:
_____________
flat_field: str</p>
<blockquote>
<div><p>full path of the flat-field mib data</p>
</div></blockquote>
<dl class="simple">
<dt>hot_pix_factor: float</dt><dd><p>intensity factor above average intensity to determine hot pixels</p>
</dd>
<dt>show_mask: bool</dt><dd><p>Default True. For plotting the mask.</p>
</dd>
<dt>dest_h5_path: str</dt><dd><p>default None. full path of the h5 file to be saved. 
key for mask: ‘merlin_mask’. A pyxem version of the mask is also 
saved in the same destination.</p>
</dd>
<dt>show_hist: bool</dt><dd><p>If passed as True a histogram of the flat-feild data is shown 
(averaged if the data is a stack)</p>
</dd>
</dl>
<dl class="simple">
<dt>mask: pyxem ElectronDiffraction2D</dt><dd><p>mask pyxem object</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-epsic_tools.toolbox.ptycho_utils">
<span id="epsic-tools-toolbox-ptycho-utils-module"></span><h2>epsic_tools.toolbox.ptycho_utils module<a class="headerlink" href="#module-epsic_tools.toolbox.ptycho_utils" title="Permalink to this headline"></a></h2>
<p>Created on Fri May 15 22:52:15 2020</p>
<p>&#64;author: eha56862</p>
<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.ptycho_utils.crop_recon_obj">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.ptycho_utils.</span></span><span class="sig-name descname"><span class="pre">crop_recon_obj</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">json_file</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/ptycho_utils.html#crop_recon_obj"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.ptycho_utils.crop_recon_obj" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.ptycho_utils.duplicate_json">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.ptycho_utils.</span></span><span class="sig-name descname"><span class="pre">duplicate_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source_json_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">new_json_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">param_to_change</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/ptycho_utils.html#duplicate_json"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.ptycho_utils.duplicate_json" title="Permalink to this definition"></a></dt>
<dd><p>This gets a source json file and duplicates it, changing a parameter if declared
Parameters
____________
source_json_path: str</p>
<blockquote>
<div><p>full path of the starting json file</p>
</div></blockquote>
<dl class="simple">
<dt>new_json_path: str</dt><dd><p>full path of the new json file</p>
</dd>
<dt>param_to_change: tuple of (str, new_val) </dt><dd><p>default None - key of the parameter to be changed as first el of tuple and the new value as the second el.</p>
</dd>
</dl>
<dl class="simple">
<dt>data_dict: dict</dt><dd><p>The new dict if anything changed.</p>
</dd>
</dl>
<p>TODO: Fix the ugly limited dict depth implementation!</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.ptycho_utils.e_lambda">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.ptycho_utils.</span></span><span class="sig-name descname"><span class="pre">e_lambda</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">e_0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/ptycho_utils.html#e_lambda"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.ptycho_utils.e_lambda" title="Permalink to this definition"></a></dt>
<dd><p>relativistic electron wavelength</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>e_0</strong> – int
accelerating voltage in volts</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
<dl class="simple">
<dt>e_lambda: float</dt><dd><p>wavelength in meters</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.ptycho_utils.get_RMSE">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.ptycho_utils.</span></span><span class="sig-name descname"><span class="pre">get_RMSE</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dist_list</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/ptycho_utils.html#get_RMSE"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.ptycho_utils.get_RMSE" title="Permalink to this definition"></a></dt>
<dd><p>Input: 
dist_list: list of floats</p>
<blockquote>
<div><p>atomic distances</p>
</div></blockquote>
<dl class="simple">
<dt>returns</dt><dd><p>RMSE of the list elements</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.ptycho_utils.get_error">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.ptycho_utils.</span></span><span class="sig-name descname"><span class="pre">get_error</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/ptycho_utils.html#get_error"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.ptycho_utils.get_error" title="Permalink to this definition"></a></dt>
<dd><dl class="simple">
<dt>file_path: str</dt><dd><p>full path of the recon file. It check if it is frtom ptypy or ptyREX</p>
</dd>
</dl>
<dl class="simple">
<dt>errors: np.array</dt><dd><p>error as numpy array</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.ptycho_utils.get_fft">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.ptycho_utils.</span></span><span class="sig-name descname"><span class="pre">get_fft</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj_arr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">crop</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">apply_hann</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/ptycho_utils.html#get_fft"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.ptycho_utils.get_fft" title="Permalink to this definition"></a></dt>
<dd><p>obj_arr: numpy.ndarray
crop: float</p>
<blockquote>
<div><p>fraction of FOV to crop before fft. default None</p>
</div></blockquote>
<dl class="simple">
<dt>apply_hann: bool</dt><dd><p>If True, hanning window applied before fft</p>
</dd>
</dl>
<dl class="simple">
<dt>obj_fft: numpy.ndarray</dt><dd><p>abs array of the fft</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.ptycho_utils.get_hdf5_complex_probe">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.ptycho_utils.</span></span><span class="sig-name descname"><span class="pre">get_hdf5_complex_probe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">h5_file</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/ptycho_utils.html#get_hdf5_complex_probe"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.ptycho_utils.get_hdf5_complex_probe" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.ptycho_utils.get_hdf5_error">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.ptycho_utils.</span></span><span class="sig-name descname"><span class="pre">get_hdf5_error</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">h5_file</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/ptycho_utils.html#get_hdf5_error"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.ptycho_utils.get_hdf5_error" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.ptycho_utils.get_hdf5_object_modulus">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.ptycho_utils.</span></span><span class="sig-name descname"><span class="pre">get_hdf5_object_modulus</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">h5_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/ptycho_utils.html#get_hdf5_object_modulus"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.ptycho_utils.get_hdf5_object_modulus" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.ptycho_utils.get_hdf5_object_phase">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.ptycho_utils.</span></span><span class="sig-name descname"><span class="pre">get_hdf5_object_phase</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">h5_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/ptycho_utils.html#get_hdf5_object_phase"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.ptycho_utils.get_hdf5_object_phase" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.ptycho_utils.get_hdf5_probe_modulus">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.ptycho_utils.</span></span><span class="sig-name descname"><span class="pre">get_hdf5_probe_modulus</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">h5_file</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/ptycho_utils.html#get_hdf5_probe_modulus"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.ptycho_utils.get_hdf5_probe_modulus" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.ptycho_utils.get_hdf5_probe_phase">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.ptycho_utils.</span></span><span class="sig-name descname"><span class="pre">get_hdf5_probe_phase</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">h5_file</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/ptycho_utils.html#get_hdf5_probe_phase"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.ptycho_utils.get_hdf5_probe_phase" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.ptycho_utils.get_json_params">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.ptycho_utils.</span></span><span class="sig-name descname"><span class="pre">get_json_params</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">h5_file</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/ptycho_utils.html#get_json_params"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.ptycho_utils.get_json_params" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.ptycho_utils.get_json_pixelSize">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.ptycho_utils.</span></span><span class="sig-name descname"><span class="pre">get_json_pixelSize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">json_file</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/ptycho_utils.html#get_json_pixelSize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.ptycho_utils.get_json_pixelSize" title="Permalink to this definition"></a></dt>
<dd><dl class="simple">
<dt>json_file: str</dt><dd><p>full path of the json file.</p>
</dd>
</dl>
<p>Returns
pixelSize: float</p>
<blockquote>
<div><p>reconstruction pixel size in (m)</p>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.ptycho_utils.get_obj_array">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.ptycho_utils.</span></span><span class="sig-name descname"><span class="pre">get_obj_array</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/ptycho_utils.html#get_obj_array"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.ptycho_utils.get_obj_array" title="Permalink to this definition"></a></dt>
<dd><blockquote>
<div><dl class="simple">
<dt>file_path: str</dt><dd><p>full path of the recon file. It check if it is frtom ptypy or ptyREX</p>
</dd>
</dl>
<dl class="simple">
<dt>data_arr: np.array</dt><dd><p>complex object numpy array</p>
</dd>
</dl>
</div></blockquote>
<p>TODO: if input is json check if there is a similarly named hdf file in the same folder</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.ptycho_utils.get_probe_array">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.ptycho_utils.</span></span><span class="sig-name descname"><span class="pre">get_probe_array</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/ptycho_utils.html#get_probe_array"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.ptycho_utils.get_probe_array" title="Permalink to this definition"></a></dt>
<dd><dl class="simple">
<dt>file_path: str</dt><dd><p>full path of the recon file. It check if it is frtom ptypy or ptyREX</p>
</dd>
</dl>
<dl class="simple">
<dt>probe_data_arr: np.array</dt><dd><p>complex probe numpy array</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.ptycho_utils.get_sampling_factor">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.ptycho_utils.</span></span><span class="sig-name descname"><span class="pre">get_sampling_factor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">d</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dr</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/ptycho_utils.html#get_sampling_factor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.ptycho_utils.get_sampling_factor" title="Permalink to this definition"></a></dt>
<dd><dl class="simple">
<dt>x: float</dt><dd><p>pixelSize * number of pixels in probe</p>
</dd>
<dt>d: float</dt><dd><p>probe diameter in m</p>
</dd>
<dt>n: int</dt><dd><p>number of probe positions</p>
</dd>
<dt>dr: float</dt><dd><p>step size</p>
</dd>
</dl>
<dl class="simple">
<dt>s: float</dt><dd><p>sampling factor</p>
</dd>
</dl>
<p>Ref: Darren Batey PhD Thesis, Page 68.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.ptycho_utils.json_to_dict">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.ptycho_utils.</span></span><span class="sig-name descname"><span class="pre">json_to_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">json_path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/ptycho_utils.html#json_to_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.ptycho_utils.json_to_dict" title="Permalink to this definition"></a></dt>
<dd><dl class="simple">
<dt>json_path: str</dt><dd><p>full path of the json file.</p>
</dd>
</dl>
<p>json_dict: dictionary</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.ptycho_utils.kdtree_NN">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.ptycho_utils.</span></span><span class="sig-name descname"><span class="pre">kdtree_NN</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">experiment</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">truth</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">search_rad</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/ptycho_utils.html#kdtree_NN"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.ptycho_utils.kdtree_NN" title="Permalink to this definition"></a></dt>
<dd><p>Runs sklearn KDTree proximity algorithm on the data
Parameters
___________
experiment: list</p>
<blockquote>
<div><p>list of atomic position coordinates in the experimental data</p>
</div></blockquote>
<dl class="simple">
<dt>truth: list</dt><dd><p>list of atomic position coordinates in the ground truth</p>
</dd>
<dt>search_rad: float</dt><dd><p>radius to search for nearest neighbour</p>
</dd>
</dl>
<dl class="simple">
<dt>nn_results: dict</dt><dd><dl class="simple">
<dt>dict containing the following keys:</dt><dd><p>TP list - as paired atoms coordinates and there distances
FP list
FN list
Precision
Recall
RMSE of distances</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.ptycho_utils.load_dict_from_hdf5">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.ptycho_utils.</span></span><span class="sig-name descname"><span class="pre">load_dict_from_hdf5</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/ptycho_utils.html#load_dict_from_hdf5"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.ptycho_utils.load_dict_from_hdf5" title="Permalink to this definition"></a></dt>
<dd><p>recursively loads an hdf5 file to a nested dict</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.ptycho_utils.load_recon">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.ptycho_utils.</span></span><span class="sig-name descname"><span class="pre">load_recon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fn</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/ptycho_utils.html#load_recon"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.ptycho_utils.load_recon" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.ptycho_utils.load_series">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.ptycho_utils.</span></span><span class="sig-name descname"><span class="pre">load_series</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">crop_to</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sort_by</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'rot'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blur</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/ptycho_utils.html#load_series"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.ptycho_utils.load_series" title="Permalink to this definition"></a></dt>
<dd><p>loads all ptycho reconstructions in a folder and sorts by a parameter</p>
<p>pn : String pathname of folder</p>
<p>sort_by: ‘rot’ or ‘step’ parameter by which to sort the data</p>
<p>crop_to: Int size of cropped object reconstruction</p>
<p>blur: Int to pass as sigma to gaussian blur object phase. 0 = no blur</p>
<p>verbose: Bool to print detailed output</p>
<p>d_s: hyperspy singnal2D object function</p>
<p>p_s: hyperspy singnal2D probe function</p>
<p>d_s_fft: hyperspy singnal2D fourier transfor of object function</p>
<p>rad_fft: hyperspy singnal1D object radial profile of d_s_fft</p>
<p>r_s: hyperspy signal1D object scan rotation</p>
<p>s_s: hyperspy signal1D object probe step size</p>
<p>e_s: hyperspy signal1D object final error value</p>
<p>from epsic_tools.toolbox.ptychography.load_pycho_series import load_series
pn = r’Y:0cm26481-1processingMerlin00130_80kV_graphene_600C_ptyclusterprocessingpycho’
d_s, p_s, d_s_fft, rad_fft, r_s, s_s, e_s = load_series(pn,sort_by = ‘rot’, crop_to = 80)
hs.plot.plot_signals([d_s,p_s,d_s_fft, rad_fft], navigator_list=[r_s,s_s, e_s,None])</p>
<p>Break loading from hdf file into seperate functions</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.ptycho_utils.plot_ptyREX_output">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.ptycho_utils.</span></span><span class="sig-name descname"><span class="pre">plot_ptyREX_output</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">json_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_fig</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">crop</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/ptycho_utils.html#plot_ptyREX_output"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.ptycho_utils.plot_ptyREX_output" title="Permalink to this definition"></a></dt>
<dd><p>To save the ptyREX recon output
Parameters
———-
json_path: str</p>
<blockquote>
<div><p>full path of the json file. This figure output will be saved in this folder.</p>
</div></blockquote>
<dl class="simple">
<dt>save_fig: str, default None</dt><dd><p>In case we want the figure to be  saved the full path should be given here
keyword argument.</p>
</dd>
<dt>crop: Bool</dt><dd><p>default False</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.ptycho_utils.plot_ptyr">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.ptycho_utils.</span></span><span class="sig-name descname"><span class="pre">plot_ptyr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/ptycho_utils.html#plot_ptyr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.ptycho_utils.plot_ptyr" title="Permalink to this definition"></a></dt>
<dd><p>Plots the real and imaginary parts of a ptypy recon file</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.ptycho_utils.save_dict_to_hdf5">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.ptycho_utils.</span></span><span class="sig-name descname"><span class="pre">save_dict_to_hdf5</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dic</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/ptycho_utils.html#save_dict_to_hdf5"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.ptycho_utils.save_dict_to_hdf5" title="Permalink to this definition"></a></dt>
<dd><p>recursively saves a nested dict into an hdf5 file</p>
</dd></dl>

</section>
<section id="module-epsic_tools.toolbox.radial_profile">
<span id="epsic-tools-toolbox-radial-profile-module"></span><h2>epsic_tools.toolbox.radial_profile module<a class="headerlink" href="#module-epsic_tools.toolbox.radial_profile" title="Permalink to this headline"></a></h2>
<p>Created on Thu Feb 13 15:37:27 2020</p>
<p>&#64;author: gys37319</p>
<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.radial_profile.radial_profile">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.radial_profile.</span></span><span class="sig-name descname"><span class="pre">radial_profile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">center</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nRad</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/radial_profile.html#radial_profile"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.radial_profile.radial_profile" title="Permalink to this definition"></a></dt>
<dd><p>calculate radial profile for a 2D array</p>
<p>data : 2D numpy array</p>
<p>center: tuple of x,y center positions</p>
<p>nRad: integer number of radial slices 
Returns
——-</p>
<p>radialprofile : nD numpy array corresponding to nRad</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.radial_profile.radial_profile_stack">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.radial_profile.</span></span><span class="sig-name descname"><span class="pre">radial_profile_stack</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">hs_obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">center</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/radial_profile.html#radial_profile_stack"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.radial_profile.radial_profile_stack" title="Permalink to this definition"></a></dt>
<dd><p>calculate radial profile from a hyperspy Signal2D object</p>
<p>hs_obj : hyperspy signal2D object</p>
<p>center: tuple of x,y center positions</p>
<p>radial_profiles : hyperspy signal1D object</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.radial_profile.sector_mask">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.radial_profile.</span></span><span class="sig-name descname"><span class="pre">sector_mask</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">shape</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">centre</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">radius</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">angle_range</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/radial_profile.html#sector_mask"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.radial_profile.sector_mask" title="Permalink to this definition"></a></dt>
<dd><p>Return a boolean mask for a circular sector. The start/stop angles in  
<cite>angle_range</cite> should be given in clockwise order.</p>
</dd></dl>

</section>
<section id="module-epsic_tools.toolbox.sim_utils">
<span id="epsic-tools-toolbox-sim-utils-module"></span><h2>epsic_tools.toolbox.sim_utils module<a class="headerlink" href="#module-epsic_tools.toolbox.sim_utils" title="Permalink to this headline"></a></h2>
<p>Created on Fri Mar 13 09:31:39 2020</p>
<p>&#64;author: eha56862
These functions are utilities for determining the parameters for the simulation matrix
TODO:</p>
<blockquote>
<div><p>get_probe
get_sim_params</p>
</div></blockquote>
<dl class="py class">
<dt class="sig sig-object py" id="epsic_tools.toolbox.sim_utils.NestedDefaultDict">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.sim_utils.</span></span><span class="sig-name descname"><span class="pre">NestedDefaultDict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/sim_utils.html#NestedDefaultDict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.sim_utils.NestedDefaultDict" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">collections.defaultdict</span></code></p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.sim_utils.add_dose_noise">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.sim_utils.</span></span><span class="sig-name descname"><span class="pre">add_dose_noise</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stack_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dose</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">add_noise</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/sim_utils.html#add_dose_noise"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.sim_utils.add_dose_noise" title="Permalink to this definition"></a></dt>
<dd><dl class="simple">
<dt>file_path: str</dt><dd><p>full path and name of the sim h5 file</p>
</dd>
<dt>stack_path:</dt><dd><p>full path for the stack h5 file</p>
</dd>
<dt>dose: int</dt><dd><p>target sum intensity of the entire 4DSTEM data</p>
</dd>
<dt>add_noise: boolean</dt><dd><p>if True it also adds posson noise to the diffraction patterns</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.sim_utils.calc_camera_length">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.sim_utils.</span></span><span class="sig-name descname"><span class="pre">calc_camera_length</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_hs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bf_rad</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">angle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pixel_size</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/sim_utils.html#calc_camera_length"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.sim_utils.calc_camera_length" title="Permalink to this definition"></a></dt>
<dd><p>it returns the camera length based on the detector pixel size and a known value
in the diffraction plane - it plots the sum dp with the known value marked with circle roi
input:</p>
<blockquote>
<div><p>data_hs: 4D-STEM hypespy object
bf_rad: int</p>
<blockquote>
<div><p>bf radius in pixels</p>
</div></blockquote>
<dl class="simple">
<dt>angle: float</dt><dd><p>known angle in diff plane in rad</p>
</dd>
<dt>pixel_size: float</dt><dd><p>physcial size of detector pix in m</p>
</dd>
</dl>
</div></blockquote>
<dl class="simple">
<dt>returns</dt><dd><dl class="simple">
<dt>CL: float</dt><dd><p>camera length in meters</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.sim_utils.calc_pixelSize">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.sim_utils.</span></span><span class="sig-name descname"><span class="pre">calc_pixelSize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">acc_voltage</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pixel_array</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">det_pixelSize</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">camera_length</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/sim_utils.html#calc_pixelSize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.sim_utils.calc_pixelSize" title="Permalink to this definition"></a></dt>
<dd><p>Calculates the pixelSize in ptycho recon</p>
<dl class="simple">
<dt>acc_voltage: int</dt><dd><p>accelerating voltage in V</p>
</dd>
<dt>pixel_array: int</dt><dd><p>number of pixels in detector in x or y (assumed square)</p>
</dd>
<dt>det_pixelSize: float</dt><dd><p>detector physical pixel size in m</p>
</dd>
<dt>camera_length: float</dt><dd><p>camera length</p>
</dd>
</dl>
<dl class="simple">
<dt>pixelSize: float</dt><dd><p>recon pixel size in m</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.sim_utils.calc_probe_size">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.sim_utils.</span></span><span class="sig-name descname"><span class="pre">calc_probe_size</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pixelSize</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">imageSize</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_lambda</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">probe_def</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">probe_semiAngle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'80pctInt'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_probe</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_probeArr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/sim_utils.html#calc_probe_size"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.sim_utils.calc_probe_size" title="Permalink to this definition"></a></dt>
<dd><p>this function is for giving an estimate of the probe size to set up the sim ptycho data accordingly.
:param pixelSize: float</p>
<blockquote>
<div><p>pixel size in (m)</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>imageSize</strong> – list of ints
image size in (pixels)</p></li>
<li><p><strong>_lambda</strong> – float
in (m) - electron wavelength</p></li>
<li><p><strong>probe_def</strong> – float
probe defocus in m</p></li>
<li><p><strong>probe_semiAngle</strong> – float
(rad) probe semi-angle</p></li>
<li><p><strong>plot_probe</strong> – boolean
default to True - to plot the probe imag / real</p></li>
<li><p><strong>return_probeArr</strong> – boolean
default to False - if the probe array is needed as output</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
<ul class="simple">
<li><p>plots probe in the real and fourier space - if plot_probe is True</p></li>
</ul>
<dl>
<dt>probe_rad: float</dt><dd><p>in (m) probe radius
if return_probeArr set to True:</p>
<blockquote>
<div><p>[probe_rad, psiShift]: with
psiShift: np.array</p>
<blockquote>
<div><p>probe in real space</p>
</div></blockquote>
</div></blockquote>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.sim_utils.fft">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.sim_utils.</span></span><span class="sig-name descname"><span class="pre">fft</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ar</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/sim_utils.html#fft"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.sim_utils.fft" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.sim_utils.find_nearest">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.sim_utils.</span></span><span class="sig-name descname"><span class="pre">find_nearest</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">array</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/sim_utils.html#find_nearest"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.sim_utils.find_nearest" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.sim_utils.genAp">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.sim_utils.</span></span><span class="sig-name descname"><span class="pre">genAp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/sim_utils.html#genAp"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.sim_utils.genAp" title="Permalink to this definition"></a></dt>
<dd><p>### Generate a circular aperture ###
out:</p>
<blockquote>
<div><p>ap - Aperture</p>
</div></blockquote>
<dl class="simple">
<dt>in:</dt><dd><p>shape - Array size
r     - Radius of aperture</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.sim_utils.genStop">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.sim_utils.</span></span><span class="sig-name descname"><span class="pre">genStop</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/sim_utils.html#genStop"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.sim_utils.genStop" title="Permalink to this definition"></a></dt>
<dd><p>### Generate a circular aperture ###
out:</p>
<blockquote>
<div><p>ap - Aperture</p>
</div></blockquote>
<dl class="simple">
<dt>in:</dt><dd><p>shape - Array size
r     - Radius of aperture</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.sim_utils.get_adf">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.sim_utils.</span></span><span class="sig-name descname"><span class="pre">get_adf</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_hs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bf_rad</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/sim_utils.html#get_adf"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.sim_utils.get_adf" title="Permalink to this definition"></a></dt>
<dd><p>provides an adf image - as outer angle it defaults to centre pixel position plus the bf disc radius
and as inner it uses the bf disc radius
:param data_hs: hyperspy Signal2D object</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>bf_rad</strong> – int
radius of the bright field disc in pixels</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
<p>adf: hyperspy Signal2D object</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.sim_utils.get_bf_disc">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.sim_utils.</span></span><span class="sig-name descname"><span class="pre">get_bf_disc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_hs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/sim_utils.html#get_bf_disc"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.sim_utils.get_bf_disc" title="Permalink to this definition"></a></dt>
<dd><p>Interactively gets the radius and centre position of the bright filed disc
:param
data_hs: hyperspy Signal2D object</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p>
</dd>
</dl>
<dl class="simple">
<dt>circ_roi: hs roi object</dt><dd><p>roi object with centre and radius</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.sim_utils.get_disc_overlap">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.sim_utils.</span></span><span class="sig-name descname"><span class="pre">get_disc_overlap</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rad</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dist</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">print_output</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/sim_utils.html#get_disc_overlap"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.sim_utils.get_disc_overlap" title="Permalink to this definition"></a></dt>
<dd><p>More suitable for Wigner - as it aims to minimse triple overlap regions
for ptyREX will be using the simpler function get_overlap
to calculate disc over lap in image or diff plane</p>
<dl class="simple">
<dt>rad: float</dt><dd><p>radius of probe or probe semi-angle</p>
</dd>
<dt>dist: float</dt><dd><p>step distance or the angle to the reflection of interest</p>
</dd>
</dl>
<p>returns</p>
<p>Percentage_overlap: float</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.sim_utils.get_figs">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.sim_utils.</span></span><span class="sig-name descname"><span class="pre">get_figs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sim_matrix_path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/sim_utils.html#get_figs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.sim_utils.get_figs" title="Permalink to this definition"></a></dt>
<dd><p>returns the list of the png figure of the final recon</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.sim_utils.get_frc">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.sim_utils.</span></span><span class="sig-name descname"><span class="pre">get_frc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ar1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ar2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">norm</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/sim_utils.html#get_frc"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.sim_utils.get_frc" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.sim_utils.get_overlap">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.sim_utils.</span></span><span class="sig-name descname"><span class="pre">get_overlap</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">probe_rad</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">step_size</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/sim_utils.html#get_overlap"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.sim_utils.get_overlap" title="Permalink to this definition"></a></dt>
<dd><dl class="simple">
<dt>probe_rad: float</dt><dd><p>probe radius in m (or rad)</p>
</dd>
<dt>step_size: float</dt><dd><p>scan step size in m (or known diffraction disc position in rad)</p>
</dd>
</dl>
<p>Returns
probe_overlap: float</p>
<blockquote>
<div><p>percentage probe overlap</p>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.sim_utils.get_potential">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.sim_utils.</span></span><span class="sig-name descname"><span class="pre">get_potential</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sim_file_path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/sim_utils.html#get_potential"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.sim_utils.get_potential" title="Permalink to this definition"></a></dt>
<dd><p>gets the pyprismatic h5 file and outputs the potential - in V.Angstroms</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.sim_utils.get_ptyREX_ready">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.sim_utils.</span></span><span class="sig-name descname"><span class="pre">get_ptyREX_ready</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sim_matrix_path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/sim_utils.html#get_ptyREX_ready"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.sim_utils.get_ptyREX_ready" title="Permalink to this definition"></a></dt>
<dd><p>checks for the folders that have ptyREX json file</p>
<p>Returns
ptyREX_dirs: list</p>
<blockquote>
<div><p>list of dirs</p>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.sim_utils.get_ptyREX_recon_list">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.sim_utils.</span></span><span class="sig-name descname"><span class="pre">get_ptyREX_recon_list</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sim_matrix_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">run_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/sim_utils.html#get_ptyREX_recon_list"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.sim_utils.get_ptyREX_recon_list" title="Permalink to this definition"></a></dt>
<dd><dl class="simple">
<dt>sim_matrix_path: str</dt><dd><p>full path of the simulation matrix</p>
</dd>
<dt>run_id: str</dt><dd><p>default None. If provided the json files with run_id in their names will be
returned.</p>
</dd>
</dl>
<dl class="simple">
<dt>common_dirs: list</dt><dd><p>List of json files that have identically named hdf5 file in the same folder</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.sim_utils.get_raw_dir_list">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.sim_utils.</span></span><span class="sig-name descname"><span class="pre">get_raw_dir_list</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sim_matrix_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">get_all</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/sim_utils.html#get_raw_dir_list"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.sim_utils.get_raw_dir_list" title="Permalink to this definition"></a></dt>
<dd><p>checks for the folders with only two files and identify them as raw
get_all set to True returns all the folders</p>
<dl class="simple">
<dt>sim_matrix_path: str</dt><dd><p>full path holding the sim matrix</p>
</dd>
<dt>get_all: bool</dt><dd><p>Default False. Set to True if all folders needed</p>
</dd>
</dl>
<dl class="simple">
<dt>raw_dirs: list</dt><dd><p>list of directories</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.sim_utils.get_sim_data">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.sim_utils.</span></span><span class="sig-name descname"><span class="pre">get_sim_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sim_h5_file</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/sim_utils.html#get_sim_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.sim_utils.get_sim_data" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.sim_utils.get_sim_params">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.sim_utils.</span></span><span class="sig-name descname"><span class="pre">get_sim_params</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sim_h5_file</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/sim_utils.html#get_sim_params"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.sim_utils.get_sim_params" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.sim_utils.get_sim_probe">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.sim_utils.</span></span><span class="sig-name descname"><span class="pre">get_sim_probe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sim_h5_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">real_space</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/sim_utils.html#get_sim_probe"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.sim_utils.get_sim_probe" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.sim_utils.get_sim_probe_for_ptyrex">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.sim_utils.</span></span><span class="sig-name descname"><span class="pre">get_sim_probe_for_ptyrex</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sim_h5_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">probe_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pixel_size</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/sim_utils.html#get_sim_probe_for_ptyrex"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.sim_utils.get_sim_probe_for_ptyrex" title="Permalink to this definition"></a></dt>
<dd><p>gets the sim probe, bins it by 2 and saves it into an h5 file readable by ptyrex.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.sim_utils.get_step_size">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.sim_utils.</span></span><span class="sig-name descname"><span class="pre">get_step_size</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">probe_rad</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_overlap</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/sim_utils.html#get_step_size"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.sim_utils.get_step_size" title="Permalink to this definition"></a></dt>
<dd><p>knowing the probe radius and the target overlap percentage this function returns
the suitable step size.
Parameters
___________
probe_rad: float</p>
<blockquote>
<div><p>probe radius in m</p>
</div></blockquote>
<dl class="simple">
<dt>target_overlap: float</dt><dd><p>overlap fraction</p>
</dd>
</dl>
<dl class="simple">
<dt>step_size: float</dt><dd><p>the step size  in m needed to get the target overlap</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.sim_utils.ifft">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.sim_utils.</span></span><span class="sig-name descname"><span class="pre">ifft</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ar</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/sim_utils.html#ifft"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.sim_utils.ifft" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.sim_utils.json_to_dict_sim">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.sim_utils.</span></span><span class="sig-name descname"><span class="pre">json_to_dict_sim</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">json_path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/sim_utils.html#json_to_dict_sim"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.sim_utils.json_to_dict_sim" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.sim_utils.makeFourierCoordinates">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.sim_utils.</span></span><span class="sig-name descname"><span class="pre">makeFourierCoordinates</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">N</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pixelSize</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/sim_utils.html#makeFourierCoordinates"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.sim_utils.makeFourierCoordinates" title="Permalink to this definition"></a></dt>
<dd><p>this function creates a set of coordinates in the Fourier space
Input
________
N: np.array of int</p>
<blockquote>
<div><p>image size in pixels. np.array((Nx,Ny))</p>
</div></blockquote>
<dl class="simple">
<dt>pixelSize: float</dt><dd><p>pixel size in A</p>
</dd>
</dl>
<p>qx: np.array 
qy: np.array</p>
<blockquote>
<div><p>fourier coordinates</p>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.sim_utils.max_defocus">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.sim_utils.</span></span><span class="sig-name descname"><span class="pre">max_defocus</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pixelSize</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">imageSize</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_lambda</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">probe_semiAngle</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/sim_utils.html#max_defocus"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.sim_utils.max_defocus" title="Permalink to this definition"></a></dt>
<dd><p>this function returns the max defocus to be used for ptycho sim given 
by the defocus resulting in probe diameter of quarter of the reconstruction array size.</p>
<dl class="simple">
<dt>pixelSize: float</dt><dd><p>pixel size in (m)</p>
</dd>
<dt>imageSize: list of ints</dt><dd><p>image size in (pixels)</p>
</dd>
<dt>_lambda: float</dt><dd><ol class="loweralpha simple" start="13">
<li><p>electron wavelength</p></li>
</ol>
</dd>
<dt>probe_semiAngle: float</dt><dd><p>(rad) probe semi-angle</p>
</dd>
</dl>
<dl class="simple">
<dt>max_def: float</dt><dd><p>max defocus in (m)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.sim_utils.parse_params_file">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.sim_utils.</span></span><span class="sig-name descname"><span class="pre">parse_params_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">h5_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">drop_unneeded</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/sim_utils.html#parse_params_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.sim_utils.parse_params_file" title="Permalink to this definition"></a></dt>
<dd><p>Reads the parameters text file into a dict to be fed into ptypy / pycho recons</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.sim_utils.setPower">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.sim_utils.</span></span><span class="sig-name descname"><span class="pre">setPower</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ar</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">power</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/sim_utils.html#setPower"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.sim_utils.setPower" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.sim_utils.shift_probe">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.sim_utils.</span></span><span class="sig-name descname"><span class="pre">shift_probe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">X</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dy</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/sim_utils.html#shift_probe"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.sim_utils.shift_probe" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.sim_utils.sim_to_hs">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.sim_utils.</span></span><span class="sig-name descname"><span class="pre">sim_to_hs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sim_h5_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">h5_key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'hdose_noisy_data'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/sim_utils.html#sim_to_hs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.sim_utils.sim_to_hs" title="Permalink to this definition"></a></dt>
<dd><p>reads simulated 4DSTEM file into hs object
Parameters
__________
sim_h5_file: str</p>
<blockquote>
<div><p>full path of the simulated 4DSTEM dataset h5 file</p>
</div></blockquote>
<dl class="simple">
<dt>h5_key: str</dt><dd><p>the h5 key of the dataset - default is ‘hdose_noisy_data’
if h5_key is passed as ‘skip’: for skipped probe data
if h5_key is passed as ‘raw’: as-output sim - each dp sums to ~1 intensity
if another h5_key is provided that location is looked up for data</p>
</dd>
</dl>
<p>data_hs: hyperspy Signal2D object</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.sim_utils.write_ptyrex_json">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.sim_utils.</span></span><span class="sig-name descname"><span class="pre">write_ptyrex_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">exp_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">iter_num</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/sim_utils.html#write_ptyrex_json"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.sim_utils.write_ptyrex_json" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</section>
<section id="module-epsic_tools.toolbox.warp_3d">
<span id="epsic-tools-toolbox-warp-3d-module"></span><h2>epsic_tools.toolbox.warp_3d module<a class="headerlink" href="#module-epsic_tools.toolbox.warp_3d" title="Permalink to this headline"></a></h2>
<p>Created on Fri Jul 12 14:15:48 2019</p>
<p>&#64;author: gys37319</p>
<p>Functions to fit and warp 4DSTEM diffraction data</p>
<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.warp_3d.compute_transform">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.warp_3d.</span></span><span class="sig-name descname"><span class="pre">compute_transform</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/warp_3d.html#compute_transform"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.warp_3d.compute_transform" title="Permalink to this definition"></a></dt>
<dd><p>compute the tranform from fit parameters</p>
<p>data : Input image, 2D numpy array
params : center [x0,y0], phi (in rad), axes [major,minor]</p>
<p>transformation</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.warp_3d.ellipse_angle_of_rotation">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.warp_3d.</span></span><span class="sig-name descname"><span class="pre">ellipse_angle_of_rotation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/warp_3d.html#ellipse_angle_of_rotation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.warp_3d.ellipse_angle_of_rotation" title="Permalink to this definition"></a></dt>
<dd><p>Calculate ellipse angle of rotation from fit params</p>
<p>a : fit parameters</p>
<p>angle in radians</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.warp_3d.ellipse_axis_length">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.warp_3d.</span></span><span class="sig-name descname"><span class="pre">ellipse_axis_length</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/warp_3d.html#ellipse_axis_length"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.warp_3d.ellipse_axis_length" title="Permalink to this definition"></a></dt>
<dd><p>Calculate ellipse major / minor axis length from fit params</p>
<p>a : fit parameters</p>
<p>len1 , len2 as a numpy array</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.warp_3d.ellipse_center">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.warp_3d.</span></span><span class="sig-name descname"><span class="pre">ellipse_center</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/warp_3d.html#ellipse_center"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.warp_3d.ellipse_center" title="Permalink to this definition"></a></dt>
<dd><p>Calculate ellipse center from fit params</p>
<p>a : fit parameters</p>
<p>x0, y0 as a numpy array</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.warp_3d.fitEllipse">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.warp_3d.</span></span><span class="sig-name descname"><span class="pre">fitEllipse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/warp_3d.html#fitEllipse"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.warp_3d.fitEllipse" title="Permalink to this definition"></a></dt>
<dd><p>fit ellipse to x,y co-ordinates</p>
<p>x : 1D numpy array
y :1D numpy array</p>
<p>a : fit parameters to be fed into functions</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.warp_3d.fit_ellipse">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.warp_3d.</span></span><span class="sig-name descname"><span class="pre">fit_ellipse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sigma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_me</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/warp_3d.html#fit_ellipse"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.warp_3d.fit_ellipse" title="Permalink to this definition"></a></dt>
<dd><p>function to fit ellipse to a single image</p>
<p>data : Input image, 2D numpy array
thershold : threshold for binarising image, integer
plot_me : boolean to plot results</p>
<p>center, phi, axes</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.warp_3d.get_coords_4d">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.warp_3d.</span></span><span class="sig-name descname"><span class="pre">get_coords_4d</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">coords</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shape_4d</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/warp_3d.html#get_coords_4d"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.warp_3d.get_coords_4d" title="Permalink to this definition"></a></dt>
<dd><p>build the 4d transformation co-ordinates</p>
<p>coords : 2D coordinates
shape_4d : shape of the 4d data set to be transformed</p>
<p>co_ords4d : 4d coordinates for the transform</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.warp_3d.plot_ellipse">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.warp_3d.</span></span><span class="sig-name descname"><span class="pre">plot_ellipse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">line_width</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/warp_3d.html#plot_ellipse"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.warp_3d.plot_ellipse" title="Permalink to this definition"></a></dt>
<dd><p>function to plot ellipse fits</p>
<p>data : Input image, 2D numpy array
params : center [x0,y0], phi (in rad), axes [major,minor]
line_width : thickness of plot line</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.warp_3d.remove_cross">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.warp_3d.</span></span><span class="sig-name descname"><span class="pre">remove_cross</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/warp_3d.html#remove_cross"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.warp_3d.remove_cross" title="Permalink to this definition"></a></dt>
<dd><p>normalize bright px and add data to zero px cross in quad chip data</p>
<p>data : 2D numpy array with bright and zero px cross</p>
<p>data : 2D numpy array with normalised / filled cross</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.warp_3d.warp_all">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.warp_3d.</span></span><span class="sig-name descname"><span class="pre">warp_all</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">coords</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dat_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_me</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/warp_3d.html#warp_all"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.warp_3d.warp_all" title="Permalink to this definition"></a></dt>
<dd><p>NOT CURRENTLY USED</p>
<p>apply transformation to full 4d data set</p>
<p>data : inpud 4d data set (dask array)
coords : 4D coordinates
plot_me : boolean</p>
<p>dat_temp : warped 4D data</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="epsic_tools.toolbox.warp_3d.warp_all_np">
<span class="sig-prename descclassname"><span class="pre">epsic_tools.toolbox.warp_3d.</span></span><span class="sig-name descname"><span class="pre">warp_all_np</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">coords</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">order</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">preserve_range</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_me</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/epsic_tools/toolbox/warp_3d.html#warp_all_np"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#epsic_tools.toolbox.warp_3d.warp_all_np" title="Permalink to this definition"></a></dt>
<dd><p>apply transformation to full 4d data set</p>
<p>data : inpud 4d data set (dask array)
coords : 4D coordinates
plot_me : boolean</p>
<p>dat_temp : warped 4D data</p>
</dd></dl>

</section>
<section id="module-epsic_tools.toolbox">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-epsic_tools.toolbox" title="Permalink to this headline"></a></h2>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, ePSIC.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>